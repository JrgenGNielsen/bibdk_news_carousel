; Inifile for openscan

[setup]
version = 1.4

; wsdl for service
wsdl = infomedia.wsdl

; logfile for verbose output
logfile = php://stdout

; set verboselevel
;   WARNING - simple warnings
;   ERROR   - errors in response
;   FATAL   - major errors
;   STAT    - Stat√≠stical logging
;   TIMER   - timer logging
;   TRACE   - program trace
;   DEBUG   - debugging info
;   Z3959   - calls to z3950 services
;   OCI     - oracle
verbose = WARNING+ERROR+FATAL+STAT+TIMER+TRACE+DEBUG+Z3950+OCI

; servicename 
servicename=infomediaWS

; php file for classmap
classes=userAccessInfomediaService_classes.php

; example client
client=example.php

;path to xml-examples
xmldir = ./xml

;namespaces
xmlns[xml]=http://www.w3.org/XML/1998/namespace
xmlns[wsdl]=http://schemas.xmlsoap.org/wsdl/
xmlns[xs]=http://www.w3.org/2001/XMLSchema
xmlns[uaim]=http://oss.dbc.dk/ns/useraccessinfomedia
xmlns[soap]=http://schemas.xmlsoap.org/wsdl/soap/
xmlns[xmlns]=http://www.w3.org/1999/xhtml

; actions
soapAction[checkArticle]=checkArticleRequest
soapAction[getArticle]=getArticleRequest
soapAction[checkReview]=checkReviewRequest
soapAction[getReview]=getReviewRequest

[rest]
; valid parameters for rest-request
action[checkArticle][articleIdentifier][]=faust
action[checkArticle][articleIdentifier][]=file
action[getArticle][articleIdentifier][]=faust
action[getArticle][articleIdentifier][]=file

action[checkReview][workIdentifier][]=faust
action[checkReview][workIdentifier][]=isbn
action[getReview][workIdentifier][]=faust
action[getReview][workIdentifier][]=isbn

action[ALL][]=libraryCode
action[ALL][]=userId
action[ALL][]=userPinCode
action[ALL][]=userIp

action[ALL][]=outputType
action[ALL][]=callback
action[ALL][]=operation

[aaa]
; aaa Authentication, Access control and Accounting
;
; if aaa_credentials is set, the rights-object is created from
; aaa_ip_rights below if ip-match otherwise it is set from
; the FORS-server if aaa_credentials contains a valid fors-login
;
; oci credentials for FORS server
;aaa_credentials = didicas/fbkbdltahdkfd@dora11.dbc.dk
;
; memcache server - use localhost in one-webserver environment
;aaa_cache_address = localhost:11211
;
; number of seconds to cache authentication and access rights info
;aaa_cache_seconds = 3600
;
; As an alternative to FORS rights, rights can be set here for selected ip-addresses
; aaa_ip_rights[group-identifier][ip_list] = list of ip's
; aaa_ip_rights[group-identifier][ressource][<named ressource>] = right to <named ressource>
; aaa_ip_rights[group-identifier][ressource][<named ressource 2>] = right to <named ressource 2>
;
aaa_ip_rights['dbc']['ip_list'] = 172.16.0.0-172.31.255.255;193.111.162.0-193.111.162.255
aaa_ip_rights['users']['ip_list'] = 172.16.0.0-172.31.255.255;193.111.162.0-193.111.162.255


;url to borrower-check webservice
[BORCHK]
url=https://borchk.addi.dk/2.5/
action=?action=borrowerCheck&serviceRequester=infomedia

[howru]
; array for test-request
faust=27882501
libraryCode=718300
userId=0019
userPinCode=0019
operation=getArticle
outputType=xml
test[]=?action=getArticle&faust=27882501&libraryCode=718300&userId=0019&userPinCode=0019&outputType=xml
preg_match[]=<uaim:imArticle>




; ip for which to override authentification
[ip_ranges]
SkoDa=195.231.241.129-195.231.241.159

[FORS]
;FORS_PRODUKT=infomedia 
FORS_PRODUKT=infomedia webservice
//FORS_USER=vip_kig
//FORS_PASS=gakpiv
FORS_USER=didicas
FORS_PASS=fbkbdltahdkfd
FORS_DB=dora11.dbc.dk
FORS_CACHE=infomediaWS_cache.dat

[OPENSEARCH]
url=https://opensearch.addi.dk/b3.5_4.5/?
defaults[action]=search
defaults[outputType]=json
defaults[relationData]=full
defaults[profile]=test
defaults[start]=1
defaults[stepValue]=10
defaults[agency]=100200

[FORSRIGHTS]
url=http://forsrights.addi.dk/1.2/?
;url=http://localhost/forsrights/server.php/?
defaults[action]=libraryListFromServiceName
defaults[serviceName]=infomedia


; parameters for infomedia webservice
[infomedia]
; webservice=http://infomedia.dk/wssearch/searchservice.asmx/
webservice=http://wssearch.infomedia.dk/searchservice.asmx/
filepath=\\10.45.16.200\y\NewsML-Repository\
GetArticleRaw=GetArticleRaw?fileName=
GetArticle=GetArticle?filename=
DisplayMyIP=DisplayMyIP?

testfile=KRD\2008\07\22\e11c8696.xml

; new infomedia webservice
[infomedia_swagger]
webservice=http://mediaresearchapi.infomedia.dk
getArticle=https://mediaresearchapi.infomedia.dk/api/v1/article?id=
authenticate=https://mediaresearchapi.infomedia.dk/oauth/token
pass=TrylleStavDbc!6102
user=infomediabruger@dbc.dk
sampleID=e0b692db

[proxy]
; Required for production (domain:port)
domain_and_port=phobos.dbc.dk:3128

